# üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ DeChat

## –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –î–ª—è Backend (Replit)
1. –ê–∫–∫–∞—É–Ω—Ç –Ω–∞ [Replit](https://replit.com)
2. –ê–∫–∫–∞—É–Ω—Ç MongoDB Atlas (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π)

### –î–ª—è Android
1. Android Studio Arctic Fox –∏–ª–∏ –Ω–æ–≤–µ–µ
2. JDK 11 –∏–ª–∏ –Ω–æ–≤–µ–µ
3. Android SDK API 24+

## –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ Backend

### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ MongoDB Atlas
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [MongoDB Atlas](https://www.mongodb.com/atlas)
2. –°–æ–∑–¥–∞–π—Ç–µ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∫–ª–∞—Å—Ç–µ—Ä
3. –°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
4. –ü–æ–ª—É—á–∏—Ç–µ connection string

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Replit –ø—Ä–æ–µ–∫—Ç–∞
1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π Replit –ø—Ä–æ–µ–∫—Ç:
   - –í—ã–±–µ—Ä–∏—Ç–µ "Node.js" –∫–∞–∫ —à–∞–±–ª–æ–Ω
   - –ù–∞–∑–æ–≤–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç "dechat-backend"

2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã backend:
   - `package.json`
   - `server.js`
   - `models/` (–≤—Å–µ —Ñ–∞–π–ª—ã)
   - `routes/` (–≤—Å–µ —Ñ–∞–π–ª—ã)

3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
npm install
```

4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
```env
MONGODB_URI=your_mongodb_connection_string
JWT_SECRET=your_super_secret_jwt_key_here
PORT=3000
```

5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:
```bash
npm start
```

6. –ü–æ–ª—É—á–∏—Ç–µ URL –≤–∞—à–µ–≥–æ Replit –ø—Ä–æ–µ–∫—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://dechat-backend.yourusername.replit.dev`)

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Android –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –®–∞–≥ 1: –ò–º–ø–æ—Ä—Ç –ø—Ä–æ–µ–∫—Ç–∞
1. –û—Ç–∫—Ä–æ–π—Ç–µ Android Studio
2. –í—ã–±–µ—Ä–∏—Ç–µ "Open" –∏ —É–∫–∞–∂–∏—Ç–µ –ø–∞–ø–∫—É `android/`

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
Android Studio –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∑–∏—Ç –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ `build.gradle.kts`

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API URL
–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è —É–∫–∞–∑–∞–Ω–∏—è URL –≤–∞—à–µ–≥–æ backend:
```kotlin
// –í —Ñ–∞–π–ª–µ –≥–¥–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è Retrofit
const val BASE_URL = "https://dechat-backend.yourusername.replit.dev"
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
dechat/
‚îú‚îÄ‚îÄ backend/                    # Replit backend
‚îÇ   ‚îú‚îÄ‚îÄ package.json           # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Node.js
‚îÇ   ‚îú‚îÄ‚îÄ server.js             # –ì–ª–∞–≤–Ω—ã–π —Å–µ—Ä–≤–µ—Ä Express + Socket.io
‚îÇ   ‚îú‚îÄ‚îÄ models/               # MongoDB –º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ User.js          # –ú–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Chat.js          # –ú–æ–¥–µ–ª—å —á–∞—Ç–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Message.js       # –ú–æ–¥–µ–ª—å —Å–æ–æ–±—â–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ routes/               # API –º–∞—Ä—à—Ä—É—Ç—ã
‚îÇ       ‚îú‚îÄ‚îÄ auth.js          # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ       ‚îî‚îÄ‚îÄ chat.js          # –ß–∞—Ç API
‚îú‚îÄ‚îÄ android/                   # Android –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ build.gradle.kts # Gradle –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ src/main/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ AndroidManifest.xml
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ java/com/dechat/
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ MainActivity.kt
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ navigation/
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ ui/
‚îÇ   ‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/
‚îÇ   ‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chat/
‚îÇ   ‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ splash/
‚îÇ   ‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ theme/
‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ service/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ res/values/
‚îÇ   ‚îî‚îÄ‚îÄ build.gradle.kts      # Project-level Gradle
‚îî‚îÄ‚îÄ docs/                     # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## API Endpoints

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- `POST /api/auth/register` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `POST /api/auth/login` - –í—Ö–æ–¥
- `POST /api/auth/logout` - –í—ã—Ö–æ–¥
- `GET /api/auth/profile` - –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ß–∞—Ç
- `GET /api/chat/chats` - –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤
- `POST /api/chat/chats` - –°–æ–∑–¥–∞—Ç—å —á–∞—Ç
- `GET /api/chat/chats/:chatId/messages` - –°–æ–æ–±—â–µ–Ω–∏—è —á–∞—Ç–∞
- `POST /api/chat/chats/:chatId/messages` - –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ

### WebSocket Events
- `join_chat` - –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ —á–∞—Ç—É
- `send_message` - –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
- `new_message` - –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- `voice_call_request` - –ó–∞–ø—Ä–æ—Å –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –≤—ã–∑–æ–≤–∞
- `voice_call_answer` - –û—Ç–≤–µ—Ç –Ω–∞ –≤—ã–∑–æ–≤

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
- **–°–æ–æ–±—â–µ–Ω–∏—è**: AES-256 —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
- **–ü–µ—Ä–µ–¥–∞—á–∞**: HTTPS –¥–ª—è –≤—Å–µ—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: JWT —Ç–æ–∫–µ–Ω—ã

### WebRTC –¥–ª—è –≥–æ–ª–æ—Å–æ–≤—ã—Ö –≤—ã–∑–æ–≤–æ–≤
- **STUN/TURN —Å–µ—Ä–≤–µ—Ä–∞**: –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –¥–ª—è –æ–±—Ö–æ–¥–∞ NAT
- **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ**: DTLS + SRTP –¥–ª—è –º–µ–¥–∏–∞-–ø–æ—Ç–æ–∫–æ–≤
- **ICE**: –î–ª—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è P2P —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

### –õ–æ–≥–∏
- Backend –ª–æ–≥–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ Replit console
- Android –ª–æ–≥–∏ —á–µ—Ä–µ–∑ Android Studio Logcat

### –û—Ç–ª–∞–¥–∫–∞
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `console.log()` –≤ backend
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `Log.d()` –≤ Android

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ** - –î–æ–±–∞–≤–∏—Ç—å AES —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
2. **–î–æ–±–∞–≤–∏—Ç—å –≥–æ–ª–æ—Å–æ–≤—ã–µ –≤—ã–∑–æ–≤—ã** - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å WebRTC
3. **Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - Firebase Cloud Messaging
4. **–§–∞–π–ª–æ–≤—ã–µ –≤–ª–æ–∂–µ–Ω–∏—è** - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
5. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** - Offline —Ä–µ–∂–∏–º –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

## Troubleshooting

### Backend –ø—Ä–æ–±–ª–µ–º—ã
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ MongoDB connection string
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã (`npm install`)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Replit console

### Android –ø—Ä–æ–±–ª–µ–º—ã
- –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à Gradle: `File > Invalidate Caches / Restart`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ target SDK –∏ min SDK –≤–µ—Ä—Å–∏–∏
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ Manifest

### –°–µ—Ç–µ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ backend URL –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ backend –∑–∞–ø—É—â–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
